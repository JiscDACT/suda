os: windows
language: shell
before_install:
  - choco install python --version=3.7
  - python -m pip install --upgrade pip
env: PATH=/c/Python37:/c/Python37/Scripts:$PATH
install:
  - pip install -r requirements.txt
  - pip install pyinstaller
script:
  - bash -c echo "Tests would go here"
before_deploy:
  - pyinstaller -F suda.py
deploy:
  - provider: releases
    api_key:
      secure: "opQEDGY047tiorhNBItRnFYyhhsyq+S3yYMY0tAUdRUl+Fhv6e5AWektvPE9E63bEn3tGpzKE8cjJaffedsDiHUmziKtR94XXwfUZsj0a6IOUmFNTN3hed0WTSFM7WIOQVu5pxKgY/qSeIm6x/iXAkWelvxqFR5o9KUjvRJ0Vjxf1tF+qkENAq071IxesBWJYjO3Q0qXCiu56TPplw7/7RAXgxwRxsP+3ZqkseDnEUW0M9pZepC93QyK5+/v3in2OEx2bGsvmuV93MocZfUa678asw238plaOresroEqHFdrlzNwZsxHLL1YIhwxYfd612I5JHfY1bm/k3dafS4f5SgcN23xJS847Whsu3ubDM087J8sv/Bcj+l0/Q14T7+qL3+wQmj3Uwa6tQV4OZIEgXyG136tNjD6rvOc0KszUzJWXcsGYYGGSa+ikeP5zQG9pX55RcRpY3Y72Oyb16IfXKDv7HdTm9X78x5Rpr6c3cS632RQq1i+o9bRwKkQqrkN8tb5TDAMNiUMl+Ta69x1aIJ//XMD3335mmuF3JN0VOgVSPhW4k5hYEx/ECVg319r+tTzK4vXJ/ZS7gODqs7zrXUWw3cEM2CYuHXlAXqYHbc9g1nDW4tDFFh1RkAV2h8yb2WR8n9NqcSpdfBjG5e/MagKu9BLYV88dE7AVoIsa4E="
    file_glob: true
    file: dist/suda.exe
    skip_cleanup: true
    draft: true
    on:
      all_branches: true
      tags: true
  - provider: pypi
    user: $TEST_PYPI_USER
    password: $TEST_PYPI_PASS
    distributions: "sdist bdist_wheel"
    skip_existing: true
    on:
      all_branches: true
      tags: true